(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/projectDetail/projectDetail"],{3308:function(o,t,n){"use strict";var e=n("7679"),i=n.n(e);i.a},"6e15":function(o,t,n){"use strict";var e;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return e}));var i=function(){var o=this,t=o.$createElement,n=(o._self._c,o.isHas?o.proInfo.des.replace(/\<img/gi,"<img style=max-width:100%;height:auto"):null);o.$mp.data=Object.assign({},{$root:{g0:n}})},a=[]},7316:function(o,t,n){"use strict";(function(o){n("34cb");e(n("66fd"));var t=e(n("bc19"));function e(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,n("543d")["createPage"])},7679:function(o,t,n){},"999a":function(o,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=a(n("b60c")),i=a(n("ed7b"));function a(o){return o&&o.__esModule?o:{default:o}}var r={data:function(){return{showArea:!0,shouIconUrl:"../../static/img/project-img/xin.png",lookDesc:"展开",isHas:!1,noMore:!1,isLogin:!1,currentIndex:0,currentIndexBg:0,latitude:39.909,longitude:116.39742,covers:[{latitude:39.9085,longitude:116.39747,clickable:!0,iconPath:"../../static/img/map/address-icon.png",width:20,height:26,callout:{content:"",color:"#ffffff",fontSize:14,borderRadius:2,bgColor:"#0191D7",display:"ALWAYS",padding:3}}],isShow:!0,isShou:!1,proInfo:{},areaImg:[],arrayArea:[],index:0,id:"",project_id:""}},onShow:function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.initShare()},onLoad:function(o){console.log(o);var t=o.project_id;this.project_id=t,this.initData()},onShareAppMessage:function(o){return{title:this.proInfo.name,path:"pages/projectDetail/projectDetail?project_id="+this.project_id,imageUrl:this.proInfo.img[0],success:function(o){console.log(o+"成功")},fail:function(o){console.log(o+"失败")},complete:function(o){}}},methods:{shareM:function(){o.showToast({title:"您还未登录!",icon:"none",position:"bottom"}),setTimeout((function(){o.navigateTo({url:"../login/authorize"})}),1500)},goMap:function(){o.navigateTo({url:"../map/map?mapInfo="+encodeURIComponent(JSON.stringify(this.covers))})},initData:function(){var t=this;o.showLoading(),e.default.projectDetail({project_id:this.project_id}).then((function(n){console.log("res",n),0===n.code?(t.isHas=!0,t.covers[0].latitude=n.data.lat,t.covers[0].longitude=n.data.long,t.covers[0].longitude=n.data.long,t.covers[0].callout.content=n.data.name,console.log(t.covers),t.proInfo=n.data,o.hideLoading(),console.log("--",t.proInfo),console.log(t.proInfo),1===n.data.favorite?(t.isShou=!0,t.shouIconUrl="../../static/img/project-img/xin_s.png"):(t.shouIconUrl="../../static/img/project-img/xin.png",t.isShou=!1)):(t.isHas=!1,o.hideLoading(),o.showToast({title:n.msg,icon:"none",position:"bottom"}),setTimeout((function(t){o.navigateBack()}),1500))})),this.initShare(),this.initArea()},initShare:function(){var o=i.default.localStorage.get("phoneInfo");this.isLogin=!(!o&&"undefined"!=typeof o&&0!=o)},initArea:function(){var o=this;e.default.getFormatArea({project_id:this.project_id}).then((function(t){console.log(t),0===t.code&&(t.data.length<=1?o.showArea=!1:o.showArea=!0,o.arrayArea=t.data,o.initAreaImg(o.arrayArea[0].id))}))},initAreaImg:function(o){var t=this;e.default.getFormat({format_area_id:o}).then((function(o){console.log(o),0===o.code&&(o.data.length<=3?(console.log(66666),t.noMore=!0,console.log(t.noMore),t.areaImg=o.data):(console.log(t.noMore),t.noMore=!1,t.areaImg=o.data))}))},showDiagram:function(o){wx.previewImage({current:o.img,urls:[o.img]})},changeView:function(){this.isShow=!this.isShow,this.isShow?this.lookDesc="展开":this.lookDesc="收起",console.log(this.isShow)},shouGo:function(){var t=this,n=i.default.localStorage.get("phoneInfo");void 0!=n&&null!=n?e.default.addFavorites({project_id:this.project_id}).then((function(n){console.log(n),0===n.code&&(t.isShou=!t.isShou,t.isShou?t.shouIconUrl="../../static/img/project-img/xin_s.png":t.shouIconUrl="../../static/img/project-img/xin.png",o.showToast({title:n.msg,icon:"none",position:"bottom"}))})):(o.showToast({title:"您还未登录!",icon:"none",position:"bottom"}),setTimeout((function(){o.navigateTo({url:"../login/authorize"})}),1500))},bindPickerChange:function(o){this.index=o.detail.value,this.id=this.arrayArea[o.detail.value].id,this.initAreaImg(this.id)},swierChangeBg:function(o){this.currentIndexBg=o.detail.current},swierChange:function(o){this.currentIndex=o.detail.current},goIn:function(){var t=i.default.localStorage.get("phoneInfo");void 0!=t&&null!=t?o.navigateTo({url:"../application/application?project_id="+this.project_id}):(o.showToast({title:"您还未登录!",icon:"none",position:"bottom"}),setTimeout((function(){o.navigateTo({url:"../login/authorize"})}),1500))},connectUs:function(){o.makePhoneCall({phoneNumber:this.proInfo.phone,success:function(o){console.log("调用成功!")},fail:function(o){console.log("调用失败!")}})}}};t.default=r}).call(this,n("543d")["default"])},b760:function(o,t,n){"use strict";n.r(t);var e=n("999a"),i=n.n(e);for(var a in e)"default"!==a&&function(o){n.d(t,o,(function(){return e[o]}))}(a);t["default"]=i.a},bc19:function(o,t,n){"use strict";n.r(t);var e=n("6e15"),i=n("b760");for(var a in i)"default"!==a&&function(o){n.d(t,o,(function(){return i[o]}))}(a);n("3308");var r,c=n("f0c5"),s=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,"37ccd62a",null,!1,e["a"],r);t["default"]=s.exports}},[["7316","common/runtime","common/vendor"]]]);