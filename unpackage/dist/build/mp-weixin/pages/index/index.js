(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2d79":function(t,e,n){"use strict";var o=n("9ad1"),i=n.n(o);i.a},"3a25":function(t,e,n){"use strict";n.r(e);var o=n("db95"),i=n("b445");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("2d79");var c,u=n("f0c5"),r=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"5da3a72f",null,!1,o["a"],c);e["default"]=r.exports},"9ad1":function(t,e,n){},b445:function(t,e,n){"use strict";n.r(e);var o=n("fe21"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},ccbe:function(t,e,n){"use strict";(function(t){n("34cb");o(n("66fd"));var e=o(n("3a25"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},db95:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},a=[]},fe21:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(n("b60c")),i=c(n("ca62")),a=c(n("ed7b"));function c(t){return t&&t.__esModule?t:{default:t}}var u={data:function(){return{location:"定位...",listData:[],getParams:{page:"1",limit:"50",city:""}}},onLoad:function(t){var e="A01";a.default.localStorage.set("maid",e),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShareAppMessage:function(t){return{title:"欢迎使用奥园招商小程序",path:"pages/index/index?project_id=A01",success:function(t){console.log(t+"成功")},fail:function(t){console.log(t+"失败")},complete:function(t){}}},onShareTimeline:function(t){return{title:"欢迎使用奥园招商小程序",type:0,query:"maid=A01"}},onShow:function(){var t=JSON.parse(a.default.localStorage.get("localtion"));console.log(t),t&&t.isChange&&(this.location=t.city,this.getParams.city=t.city,this.initData())},mounted:function(){this.getAuthorizeInfo()},methods:{initData:function(){var t=this,e=this.getParams.city.replace("市","");this.getParams.city=e,o.default.getProjectList(this.getParams).then((function(e){console.log(e),0===e.code&&(t.listData=e.data.list)}))},changeCity:function(){t.navigateTo({url:"../address/address"})},detailGo:function(e){t.navigateTo({url:"../projectDetail/projectDetail?project_id="+e})},applicationGo:function(){var e=a.default.localStorage.get("phoneInfo");void 0==e||null==e?(t.showToast({title:"您还未登录!",icon:"none",position:"bottom"}),setTimeout((function(){console.log(555),t.navigateTo({url:"../login/authorize"})}),1500)):t.navigateTo({url:"../application/application"})},projectGo:function(){t.navigateTo({url:"../projectList/projectList"})},getAuthorizeInfo:function(){var e=this;t.authorize({scope:"scope.userLocation",success:function(){e.getLocationInfo()},fail:function(){e.openConfirm(),console.log("你拒绝了授权，无法获得周边信息")}})},getLocationInfo:function(){var e=this;t.getLocation({type:"wgs84",success:function(t){var n=new i.default({key:"5TPBZ-ZFB3R-NCZWD-WMSLS-QPZ6S-VHFVD"});n.reverseGeocoder({location:{latitude:t.latitude,longitude:t.longitude},success:function(t){console.log("resd",t),e.location=t.result.ad_info.city,a.default.localStorage.set("localtion",JSON.stringify({city:t.result.ad_info.city})),e.getParams.city=t.result.ad_info.city,e.initData()}})}})},openConfirm:function(){t.showModal({title:"请求授权当前位置",content:"需要获取您的地理位置，请确认授权",success:function(e){e.confirm?t.openSetting():e.cancel&&t.showToast({title:"你拒绝了授权，无法获得周边信息",icon:"none",duration:1e3})}})}}};e.default=u}).call(this,n("543d")["default"])}},[["ccbe","common/runtime","common/vendor"]]]);